<aside *ngIf="!isSidebarCollapsed"
  class="min-h-screen w-64 bg-[#eae7dd] text-[#2a2b2a] flex flex-col transition-all duration-300">
  <!-- Sidebar Top -->
  <div class="p-4 flex items-center justify-between border-b border-[#99775c]">
    <a href="#" class="flex items-center space-x-2">
      <img src="assets/image/logo/parroquia.svg" alt="Logo" class="h-8">
      <span [class.hidden]="isSidebarCollapsed" class="font-bold text-lg">Parroquia Condado</span>
    </a>
  </div>

  <!-- Search -->
  <div class="p-4">
    <div class="relative">
      <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-3 top-3 h-5 w-5 text-[#99775c]" fill="none"
        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
      <input type="search"
        class="w-full py-2 pl-10 pr-4 border border-[#99775c] rounded-md focus:ring-2 focus:ring-[#50a2a7] focus:outline-none"
        placeholder="Buscar..." />
    </div>
  </div>

  <!-- Main Navigation -->
  <nav class="flex-1 p-4 overflow-y-auto">
    <h2 [class.hidden]="isSidebarCollapsed" class="font-semibold text-lg text-[#99775c] mb-4">Main</h2>
    <ul class="space-y-2">
      <li>
        <a routerLink="/admin/dashboard" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition">
          Dashboard
        </a>
      </li>
      <li>
        <a routerLink="/admin/disponibilidad" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition">
          Consulta Tumba
        </a>
      </li>
      <li>
        <button (click)="toggleCementerio()"
          class="w-full text-left py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition">
          Cementerio
        </button>
        <ul *ngIf="isCementerioOpen && !isSidebarCollapsed" class="mt-2 pl-4 border-l border-[#99775c] space-y-1">
          <li>
            <a routerLink="/admin/servicio" class="block py-1 hover:underline text-[#2a2b2a]">Servicio</a>
          </li>
          <li>
            <a routerLink="/admin/difunto" class="block py-1 hover:underline text-[#2a2b2a]">Difunto</a>
          </li>
          <li>
            <a routerLink="/admin/tumba" class="block py-1 hover:underline text-[#2a2b2a]">Tumba</a>
          </li>
        </ul>
      </li>
      <li>
        <button (click)="toggleInformativo()"
          class="w-full text-left py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition">
          Informativo
        </button>
        <ul *ngIf="isInformativoOpen && !isSidebarCollapsed" class="mt-2 pl-4 border-l border-[#99775c] space-y-1">
          <li>
            <a routerLink="/admin/obituario" class="block py-1 hover:underline text-[#2a2b2a]">Obituario</a>
          </li>
          <li>
            <a routerLink="/admin/articulo" class="block py-1 hover:underline text-[#2a2b2a]">Artículos</a>
          </li>
          <li>
            <a routerLink="/admin/guia" class="block py-1 hover:underline text-[#2a2b2a]">Guías</a>
          </li>
        </ul>
      </li>
      <li>
        <a routerLink="/admin/iglesia" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition">
          Reportes
        </a>
      </li>
      <li>
        <a routerLink="/admin/historial" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition">
          Historial
        </a>
      </li>
    </ul>
  </nav>

  <!-- Footer -->
  <div class="p-4 border-t border-[#99775c] mt-auto">
    <div class="flex items-center space-x-4">
      <img src="assets/profile.png" alt="User Avatar" class="h-10 w-10 rounded-full">
      <div *ngIf="user && !isSidebarCollapsed; else errorTemplate">
        <p class="font-semibold text-[#2a2b2a]">{{ user.first_name }} {{ user.last_name }}</p>
        <p class="text-sm text-[#99775c]">{{ user.email }}</p>
      </div>
    </div>
    
    <ng-template #errorTemplate>
      <p class="text-sm text-[#99775c]">Error al cargar el perfil</p>
    </ng-template>
    <div class="flex items-center justify-between">
      <!-- Botón de Dark Mode -->
      <button (click)="toggleDarkMode()" class="p-2 rounded bg-[#99775c] hover:bg-[#50a2a7] transition"
        aria-label="Toggle Dark Mode">
        <ng-container *ngIf="isDarkMode; else lightIcon">
          <!-- Sun Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#eae7dd]" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
        </ng-container>
        <ng-template #lightIcon>
          <!-- Moon Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#eae7dd]" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </ng-template>
      </button>

      <!-- Botón de Logout -->
      <button (click)="logout()"
        class="p-2 rounded bg-[#99775c] hover:bg-[#50a2a7] transition"
        aria-label="Logout">
        <img src="assets/image/icono/log-out.svg" alt="Logout" class="h-6 w-6">
      </button>
    </div>
  </div>
</aside>
