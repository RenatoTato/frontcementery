<aside *ngIf="!isSidebarCollapsed"
  class="min-h-screen w-64 bg-[#eae7dd] text-[#2a2b2a] flex flex-col transition-all duration-300">
  
  <!-- Sidebar Top -->
  <div class="p-4 flex items-center justify-between border-b border-[#99775c] flex-none">
    <a href="/admin/dashboard" class="flex items-center space-x-2">
      <img src="assets/image/logo/parroquia.svg" alt="Logo" class="h-8 md:h-12"
      style="transform: scale(1.25);">
      <span [class.hidden]="isSidebarCollapsed" class="font-bold text-lg">Parroquia Condado</span>
    </a>
  </div>

  <!-- Search -->
  <div class="p-4 flex-none">
    <div class="relative">
      <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-3 top-3 h-5 w-5 text-[#99775c]" fill="none"
        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
      <input type="search"
        class="w-full py-2 pl-10 pr-4 border border-[#99775c] rounded-md focus:ring-2 focus:ring-[#50a2a7] focus:outline-none"
        placeholder="Buscar..." />
    </div>
  </div>

  <!-- Main Navigation -->
  <nav class="p-4 flex-none overflow-y-auto">
    <h2 [class.hidden]="isSidebarCollapsed" class="font-semibold text-lg text-[#99775c] mb-4">Main</h2>
    <ul class="space-y-2">
      <li>
        <a routerLink="/admin/dashboard" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition flex items-center space-x-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-layout-dashboard" width="24"
              height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
              stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M4 4h6v8h-6z" />
              <path d="M4 16h6v4h-6z" />
              <path d="M14 12h6v8h-6z" />
              <path d="M14 4h6v4h-6z" />
            </svg>
          <span>Dashboard</span>
        </a>
      </li>
      <li>
        <a routerLink="/admin/disponibilidad" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition flex items-center space-x-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-map-check" width="24"
          height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
          stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M11 18l-2 -1l-6 3v-13l6 -3l6 3l6 -3v9"></path>
          <path d="M9 4v13"></path>
          <path d="M15 7v8"></path>
          <path d="M15 19l2 2l4 -4"></path>
        </svg>
          <span>Consulta Tumba</span>
        </a>
      </li>
      <li>
        <button (click)="toggleCementerio()" class="w-full text-left py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition flex items-center space-x-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-report-analytics" width="24"
              height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
              stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" />
              <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" />
              <path d="M9 17v-5" />
              <path d="M12 17v-1" />
              <path d="M15 17v-3" />
            </svg>
          <span>Cementerio</span>
        </button>
        <ul *ngIf="isCementerioOpen && !isSidebarCollapsed" class="mt-2 pl-4 border-l border-[#99775c] space-y-1">
          <li>
            <a routerLink="/admin/servicio" class="block py-1 hover:underline text-[#2a2b2a] flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-description" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                <path d="M9 17h6"></path>
                <path d="M9 13h6"></path>
              </svg>
              <span>Servicio</span>
            </a>
          </li>
          <li>
            <a routerLink="/admin/difunto" class="block py-1 hover:underline text-[#2a2b2a] flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-description" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                <path d="M9 17h6"></path>
                <path d="M9 13h6"></path>
              </svg>
              <span>Difunto</span>
            </a>
          </li>
          <li>
            <a routerLink="/admin/tumba" class="block py-1 hover:underline text-[#2a2b2a] flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-description" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                <path d="M9 17h6"></path>
                <path d="M9 13h6"></path>
              </svg>
              <span>Tumba</span>
            </a>
          </li>
        </ul>
      </li>
      <li>
        <button (click)="toggleInformativo()" class="w-full text-left py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition flex items-center space-x-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-report-analytics" width="24"
              height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
              stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" />
              <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" />
              <path d="M9 17v-5" />
              <path d="M12 17v-1" />
              <path d="M15 17v-3" />
            </svg>
          <span>Informativo</span>
        </button>
        <ul *ngIf="isInformativoOpen && !isSidebarCollapsed" class="mt-2 pl-4 border-l border-[#99775c] space-y-1">
          <li>
            <a routerLink="/admin/obituario" class="block py-1 hover:underline text-[#2a2b2a] flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-description" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                <path d="M9 17h6"></path>
                <path d="M9 13h6"></path>
              </svg>
              <span>Obituario</span>
            </a>
          </li>
          <li>
            <a routerLink="/admin/articulo" class="block py-1 hover:underline text-[#2a2b2a] flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-description" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                <path d="M9 17h6"></path>
                <path d="M9 13h6"></path>
              </svg>
              <span>Artículos</span>
            </a>
          </li>
          <li>
            <a routerLink="/admin/guia" class="block py-1 hover:underline text-[#2a2b2a] flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-description" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                <path d="M9 17h6"></path>
                <path d="M9 13h6"></path>
              </svg>
              <span>Guías</span>
            </a>
          </li>
          <li>
            <a routerLink="/admin/info" class="block py-1 hover:underline text-[#2a2b2a] flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-description" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                <path d="M9 17h6"></path>
                <path d="M9 13h6"></path>
              </svg>
              <span>Iglesias</span>
            </a>
          </li>
        </ul>
      </li>
      <li>
        <a routerLink="/admin/iglesia" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition flex items-center space-x-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chart-pie" width="24"
              height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
              stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M10 3.2a9 9 0 1 0 10.8 10.8a1 1 0 0 0 -1 -1h-6.8a2 2 0 0 1 -2 -2v-7a.9 .9 0 0 0 -1 -.8" />
              <path d="M15 3.5a9 9 0 0 1 5.5 5.5h-4.5a1 1 0 0 1 -1 -1v-4.5" />
            </svg>
          <span>Reportes</span>
        </a>
      </li>
      <li>
        <a routerLink="/admin/historial" class="block py-2 px-4 rounded hover:bg-[#99775c] hover:text-white transition flex items-center space-x-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-transform-filled" width="24"
              height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
              stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M18 14a4 4 0 1 1 -3.995 4.2l-.005 -.2l.005 -.2a4 4 0 0 1 3.995 -3.8z" stroke-width="0"
                fill="currentColor" />
              <path
                d="M16.707 2.293a1 1 0 0 1 .083 1.32l-.083 .094l-1.293 1.293h3.586a3 3 0 0 1 2.995 2.824l.005 .176v3a1 1 0 0 1 -1.993 .117l-.007 -.117v-3a1 1 0 0 0 -.883 -.993l-.117 -.007h-3.585l1.292 1.293a1 1 0 0 1 -1.32 1.497l-.094 -.083l-3 -3a.98 .98 0 0 1 -.28 -.872l.036 -.146l.04 -.104c.058 -.126 .14 -.24 .245 -.334l2.959 -2.958a1 1 0 0 1 1.414 0z"
                stroke-width="0" fill="currentColor" />
              <path
                d="M3 12a1 1 0 0 1 .993 .883l.007 .117v3a1 1 0 0 0 .883 .993l.117 .007h3.585l-1.292 -1.293a1 1 0 0 1 -.083 -1.32l.083 -.094a1 1 0 0 1 1.32 -.083l.094 .083l3 3a.98 .98 0 0 1 .28 .872l-.036 .146l-.04 .104a1.02 1.02 0 0 1 -.245 .334l-2.959 2.958a1 1 0 0 1 -1.497 -1.32l.083 -.094l1.291 -1.293h-3.584a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-3a1 1 0 0 1 1 -1z"
                stroke-width="0" fill="currentColor" />
              <path d="M6 2a4 4 0 1 1 -3.995 4.2l-.005 -.2l.005 -.2a4 4 0 0 1 3.995 -3.8z" stroke-width="0"
                fill="currentColor" />
            </svg>
          <span>Historial</span>
        </a>
      </li>
    </ul>
  </nav>

  <div class="flex-1"></div>
  <!-- Footer -->
  <div class="p-4 border-t border-[#99775c] flex-none">
    <div class="flex items-center space-x-4">
      <img src="assets/fotos/olivares.jpeg" alt="User Avatar" class="h-10 w-10 rounded-full">
      <div *ngIf="user">
        <p class="font-semibold text-[#2a2b2a]">
          {{ user.first_name || 'Livingston' }} {{ user.last_name || 'Olivares' }}
        </p>
        <p class="text-sm text-[#99775c]">{{ user.email || 'olivliv@gmail.com' }}</p>
      </div>
      <div *ngIf="!user">
        <p class="text-sm text-[#99775c]">Usuario no autenticado</p>
      </div>
    </div>
    <div class="flex items-center justify-between mt-4">
      <button (click)="toggleDarkMode()" class="p-2 rounded bg-[#99775c] hover:bg-[#50a2a7] transition"
        aria-label="Toggle Dark Mode">
        <ng-container *ngIf="isDarkMode; else lightIcon">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#eae7dd]" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
          </svg>
        </ng-container>
        <ng-template #lightIcon>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#eae7dd]" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </ng-template>
      </button>
      <button (click)="logout()" class="p-2 rounded bg-[#99775c] hover:bg-[#50a2a7] transition"
        aria-label="Logout">
        <img src="assets/image/icono/log-out.svg" alt="Logout" class="h-6 w-6">
      </button>
    </div>
  </div>
  <!-- Flexible Spacer -->
  <div class="flex-2"></div>
</aside>
